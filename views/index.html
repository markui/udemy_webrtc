<html>
  <head>
    <title>O'Reilly Introduction to WebRTC</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body>
    Hello, WebRTC!
    <video></video>

    <script type="text/javascript">
    	navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;

    	var constraints = {
    		audio: false,
    		video: {
    			mandatory: {
    				minWidth: 640,
    				maxWidth: 640,
    				minHeight: 360,
    				maxHeight: 480,

    			}
    		}
    	};
    	var videoArea = document.querySelector("video");

    	navigator.getUserMedia(constraints, onSuccess, onError);

    	function onSuccess(stream) {
    		console.log("Success! We have a stream!");
    		videoArea.srcObject = stream;
    		videoArea.className = "grayscale_filter";
    		// createObjectURL is being deprecated
    		// videoArea.src = window.URL.createObjectURL(stream);
    		videoArea.play();
    	}

    	function onError(error) {
    		console.log("Error with getUserMedia: ", error);
    	}

    </script>
  </body>
</html>

